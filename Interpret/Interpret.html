<!DOCTYPE html>
<html lang="en"><head>
<script src="Interpret_files/libs/clipboard/clipboard.min.js"></script>
<script src="Interpret_files/libs/quarto-html/tabby.min.js"></script>
<script src="Interpret_files/libs/quarto-html/popper.min.js"></script>
<script src="Interpret_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Interpret_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Interpret_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="Interpret_files/libs/quarto-html/quarto-syntax-highlighting-dark-b758ccaa5987ceb1b75504551e579abf.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.26">

  <title>Interpretation of Machine Learning Results</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Interpret_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Interpret_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="Interpret_files/libs/revealjs/dist/theme/quarto-92f953f199ed25aab29d366ec0d00847.css">
  <link href="Interpret_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Interpret_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Interpret_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Interpret_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="Interpret_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="Interpret_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="Interpret_files/libs/kePrint-0.0.1/kePrint.js"></script>

  <link href="Interpret_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="Interpret_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

  <script src="Interpret_files/libs/plotly-binding-4.11.0/plotly.js"></script>

  <script src="Interpret_files/libs/typedarray-0.1/typedarray.min.js"></script>

  <script src="Interpret_files/libs/jquery-3.5.1/jquery.min.js"></script>

  <link href="Interpret_files/libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">

  <script src="Interpret_files/libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>

  <link href="Interpret_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

  <script src="Interpret_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>

</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Interpretation of Machine Learning Results</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="from-blackbox-to-interpretation" class="slide level2">
<h2>From Blackbox to Interpretation</h2>

<img data-src="Images/Black%20Box.png" class="r-stretch"></section>
<section id="types-of-interpretation" class="slide level2">
<h2>Types of Interpretation</h2>

<img data-src="images/clipboard-4215941220.png" class="r-stretch"></section>
<section id="types-of-interpretation-1" class="slide level2">
<h2>Types of Interpretation</h2>

<img data-src="images/clipboard-2435355569.png" class="r-stretch"></section>
<section id="ceteris-paribus-plot-local-and-model-agnostic" class="slide level2">
<h2>Ceteris Paribus Plot (Local and Model Agnostic)</h2>
<h3 id="loading-the-data-and-libraries">Loading the Data and Libraries</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">library</span>(rio)</span>
<span id="cb1-2"><a href=""></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-3"><a href=""></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-4"><a href=""></a><span class="fu">library</span>(wooldridge)</span>
<span id="cb1-5"><a href=""></a>DataWage<span class="ot">=</span>wage1 <span class="sc">|&gt;</span> </span>
<span id="cb1-6"><a href=""></a>         <span class="fu">clean_names</span>(<span class="st">"upper_camel"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-7"><a href=""></a>         <span class="fu">select</span>(Wage, Educ, Tenure, Female) <span class="sc">|&gt;</span></span>
<span id="cb1-8"><a href=""></a>         <span class="fu">mutate</span>(<span class="at">Female=</span><span class="fu">as.factor</span>(Female))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="ceteris-paribus-plot-local-and-model-agnostic-1" class="slide level2">
<h2>Ceteris Paribus Plot (Local and Model Agnostic)</h2>
<h3 id="generating-trainingtesing-data-and-identifying-a-observation-of-interest">Generating Training/Tesing Data and Identifying a Observation of Interest</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">777</span>)</span>
<span id="cb2-2"><a href=""></a>Split7525<span class="ot">=</span><span class="fu">initial_split</span>(DataWage, <span class="at">prop=</span><span class="fl">0.75</span>, <span class="at">strata=</span>Wage)</span>
<span id="cb2-3"><a href=""></a>DataTrain<span class="ot">=</span><span class="fu">training</span>(Split7525)</span>
<span id="cb2-4"><a href=""></a>DataTest<span class="ot">=</span><span class="fu">testing</span>(Split7525)</span>
<span id="cb2-5"><a href=""></a><span class="fu">head</span>(DataTrain)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  Wage Educ Tenure Female
1 3.10   11      0      1
2 3.24   12      2      1
3 3.00   11      0      0
4 3.25    8      1      1
5 3.00   14      3      1
6 2.93   12      2      1</code></pre>
</div>
</div>
<p><strong>Variable of Interest (Helga)</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
   Wage  Educ Tenure Female
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt; 
1   8.9    17     18 1     </code></pre>
</div>
</div>
</section>
<section id="ceteris-paribus-plot-local-and-model-agnostic-2" class="slide level2">
<h2>Ceteris Paribus Plot (Local and Model Agnostic)</h2>
<h3 id="estimating-wage-with-a-random-forest-model">Estimating Wage with a Random Forest Model</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="fu">library</span>(parallel)</span>
<span id="cb5-2"><a href=""></a>ModelDesignRF<span class="ot">=</span><span class="fu">rand_forest</span>() <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href=""></a>              <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">num.threads=</span><span class="fu">detectCores</span>(), </span>
<span id="cb5-4"><a href=""></a>                         <span class="at">importance=</span><span class="st">"impurity"</span>) <span class="sc">|&gt;</span>   </span>
<span id="cb5-5"><a href=""></a>              <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb5-6"><a href=""></a></span>
<span id="cb5-7"><a href=""></a>RecipeWage<span class="ot">=</span><span class="fu">recipe</span>(Wage<span class="sc">~</span>., <span class="at">data=</span>DataTrain)</span>
<span id="cb5-8"><a href=""></a></span>
<span id="cb5-9"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">777</span>)</span>
<span id="cb5-10"><a href=""></a>WfModelWageRF<span class="ot">=</span><span class="fu">workflow</span>() <span class="sc">|&gt;</span> </span>
<span id="cb5-11"><a href=""></a>              <span class="fu">add_model</span>(ModelDesignRF)<span class="sc">|&gt;</span> </span>
<span id="cb5-12"><a href=""></a>              <span class="fu">add_recipe</span>(RecipeWage) <span class="sc">|&gt;</span>  </span>
<span id="cb5-13"><a href=""></a>              <span class="fu">fit</span>(DataTrain)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="ceteris-paribus-plot-local-and-model-agnostic-3" class="slide level2">
<h2>Ceteris Paribus Plot (Local and Model Agnostic)</h2>
<h3 id="idea">Idea</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
   Wage  Educ Tenure Female
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt; 
1   8.9    17     18 1     </code></pre>
</div>
</div>
<p>What is the impact of Tenure for this observation?</p>
<p>Idea: Substitute Tenure with different values by leaving the other values the same and predicting for each value the wage using the trained (Random Forest) model.</p>
</section>
<section id="ceteris-paribus-plot-local-and-model-agnostic-4" class="slide level2">
<h2>Ceteris Paribus Plot (Local and Model Agnostic)</h2>
<h3 id="result">Result</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="fu">library</span>(DALEX)</span>
<span id="cb7-2"><a href=""></a>ExplainerRF<span class="ot">=</span>DALEX<span class="sc">::</span><span class="fu">explain</span>(<span class="fu">extract_fit_engine</span>(WfModelWageRF), </span>
<span id="cb7-3"><a href=""></a>                           <span class="at">data=</span>DataTrain, <span class="at">y=</span>DataTrain<span class="sc">$</span>Wage)</span>
<span id="cb7-4"><a href=""></a></span>
<span id="cb7-5"><a href=""></a>CPPlot<span class="ot">=</span><span class="fu">predict_profile</span>(<span class="at">explainer=</span>ExplainerRF, </span>
<span id="cb7-6"><a href=""></a>                       <span class="at">new_observation=</span>ObsHelga, </span>
<span id="cb7-7"><a href=""></a>                       <span class="at">variables=</span><span class="st">"Tenure"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="ceteris-paribus-plot-local-and-model-agnostic-5" class="slide level2">
<h2>Ceteris Paribus Plot (Local and Model Agnostic)</h2>
<h3 id="result-1">Result</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">plot</span>(CPPlot, <span class="at">variables=</span><span class="st">"Tenure"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>

</div>
<img data-src="Interpret_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch"></section>
<section id="partial-dependency-plot-global-and-model-agnostic" class="slide level2">
<h2>Partial Dependency Plot (Global and Model Agnostic)</h2>
<h3 id="idea-1">Idea</h3>
<p>The idea behind <em>Partial Dependence Plots</em> is first to create a <em>Ceteris Paribus Plot</em> for every or at least many observations from the training dataset and then create an average of these individual plots.</p>
</section>
<section id="partial-dependency-plot-global-and-model-agnostic-1" class="slide level2">
<h2>Partial Dependency Plot (Global and Model Agnostic)</h2>
<h3 id="result-2">Result</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="fu">library</span>(DALEX)</span>
<span id="cb9-2"><a href=""></a>ICEPDPPlot<span class="ot">=</span><span class="fu">model_profile</span>(<span class="at">explainer=</span>ExplainerRF, <span class="at">variables=</span><span class="st">"Tenure"</span>, </span>
<span id="cb9-3"><a href=""></a>                         <span class="at">N=</span><span class="cn">NULL</span>)</span>
<span id="cb9-4"><a href=""></a><span class="fu">plot</span>(ICEPDPPlot,<span class="at">geom=</span><span class="st">"profiles"</span>)<span class="sc">+</span><span class="fu">ggtitle</span>(<span class="st">"ICE &amp; PDP for Tenure"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>

</div>
<img data-src="Interpret_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch"></section>
<section id="variable-importance-global" class="slide level2">
<h2>Variable Importance (Global )</h2>
<h3 id="loading-the-data-and-libraries-1">Loading the Data and Libraries</h3>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">library</span>(tidymodels);<span class="fu">library</span>(rio);<span class="fu">library</span>(vip);<span class="fu">library</span>(DALEXtra); <span class="fu">library</span>(kableExtra)</span>
<span id="cb10-2"><a href=""></a>DataVaxFull<span class="ot">=</span><span class="fu">import</span>(<span class="st">"https://ai.lange-analytics.com/data/DataVax.rds"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href=""></a>            <span class="fu">mutate</span>(<span class="at">RowNum=</span><span class="fu">row.names</span>(.))</span>
<span id="cb10-4"><a href=""></a></span>
<span id="cb10-5"><a href=""></a>DataVax<span class="ot">=</span> DataVaxFull<span class="sc">%&gt;%</span>   </span>
<span id="cb10-6"><a href=""></a>                              <span class="fu">select</span>(PercVacFull, PercRep,</span>
<span id="cb10-7"><a href=""></a>                                      PercAsian, PercBlack,PercHisp,</span>
<span id="cb10-8"><a href=""></a>                                      PercYoung25, PercOld65, </span>
<span id="cb10-9"><a href=""></a>                                      PercFoodSt, Population) <span class="sc">%&gt;%</span> </span>
<span id="cb10-10"><a href=""></a>                       <span class="fu">mutate</span>(<span class="at">Population=</span><span class="fu">frequency_weights</span>(Population))</span>
<span id="cb10-11"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb10-12"><a href=""></a>Split85<span class="ot">=</span>DataVax <span class="sc">%&gt;%</span> <span class="fu">initial_split</span>(<span class="at">prop =</span> <span class="fl">0.85</span>,</span>
<span id="cb10-13"><a href=""></a>                                 <span class="at">strata =</span> PercVacFull,</span>
<span id="cb10-14"><a href=""></a>                                 <span class="at">breaks =</span> <span class="dv">3</span>)</span>
<span id="cb10-15"><a href=""></a></span>
<span id="cb10-16"><a href=""></a>DataTrain<span class="ot">=</span><span class="fu">training</span>(Split85)</span>
<span id="cb10-17"><a href=""></a>DataTest<span class="ot">=</span><span class="fu">testing</span>(Split85)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="globalmodel-specific-interpreting-coefficients-and-t-values" class="slide level2 smaller scrollable">
<h2>Global/Model Specific: Interpreting Coefficients and t-Values</h2>
<h3 id="linear-regresiion">Linear Regresiion</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a>ModelDesignLinRegr<span class="ot">=</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb11-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb11-4"><a href=""></a></span>
<span id="cb11-5"><a href=""></a>RecipeVax<span class="ot">=</span><span class="fu">recipe</span>(PercVacFull<span class="sc">~</span>., <span class="at">data=</span>DataTrain)</span>
<span id="cb11-6"><a href=""></a></span>
<span id="cb11-7"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">2021</span>) </span>
<span id="cb11-8"><a href=""></a>WfModelVax<span class="ot">=</span><span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href=""></a>          <span class="fu">add_model</span>(ModelDesignLinRegr)<span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href=""></a>          <span class="fu">add_recipe</span>(RecipeVax) <span class="sc">%&gt;%</span> </span>
<span id="cb11-11"><a href=""></a>          <span class="fu">add_case_weights</span>(Population) <span class="sc">%&gt;%</span> </span>
<span id="cb11-12"><a href=""></a>          <span class="fu">fit</span>(DataTrain)</span>
<span id="cb11-13"><a href=""></a><span class="fu">kbl</span>(<span class="fu">tidy</span>(WfModelVax) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="fu">abs</span>(statistic))))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">term</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std.error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">statistic</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">0.9433753</td>
<td style="text-align: right;">0.0240164</td>
<td style="text-align: right;">39.2804433</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">PercRep</td>
<td style="text-align: right;">-0.5515592</td>
<td style="text-align: right;">0.0164025</td>
<td style="text-align: right;">-33.6264704</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PercBlack</td>
<td style="text-align: right;">-0.3771981</td>
<td style="text-align: right;">0.0207927</td>
<td style="text-align: right;">-18.1408963</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">PercYoung25</td>
<td style="text-align: right;">-0.5999597</td>
<td style="text-align: right;">0.1060435</td>
<td style="text-align: right;">-5.6576772</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PercHisp</td>
<td style="text-align: right;">0.0645242</td>
<td style="text-align: right;">0.0136853</td>
<td style="text-align: right;">4.7148525</td>
<td style="text-align: right;">0.0000026</td>
</tr>
<tr class="even">
<td style="text-align: left;">PercFoodSt</td>
<td style="text-align: right;">-0.1887113</td>
<td style="text-align: right;">0.0503212</td>
<td style="text-align: right;">-3.7501339</td>
<td style="text-align: right;">0.0001813</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PercOld65</td>
<td style="text-align: right;">0.1945055</td>
<td style="text-align: right;">0.0608728</td>
<td style="text-align: right;">3.1952800</td>
<td style="text-align: right;">0.0014165</td>
</tr>
<tr class="even">
<td style="text-align: left;">PercAsian</td>
<td style="text-align: right;">0.0407740</td>
<td style="text-align: right;">0.0435763</td>
<td style="text-align: right;">0.9356931</td>
<td style="text-align: right;">0.3495327</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="globalmodel-specific-variable-importance-permutations" class="slide level2">
<h2>Global/Model Specific: Variable Importance — Permutations</h2>
<h4 id="random-forest">Random Forest</h4>
<ol type="1">
<li class="fragment">Use Out-of-Bag data from each tree.</li>
<li class="fragment">Predict with all variables and record <span class="math inline">\(MSE_{all}\)</span>.</li>
<li class="fragment">Scramble values of first variable and record <span class="math inline">\(MSE_1\)</span>.</li>
<li class="fragment">The (standardized) difference between the <span class="math inline">\(MSE_{all}\)</span> and the <span class="math inline">\(MSE_1\)</span> of the scrambled version is the variable importance for the first variable.</li>
<li class="fragment">Repeat Steps 3 – 4 for the second, third variables and so on.</li>
<li class="fragment">Plot Variable Importance.</li>
</ol>
</section>
<section id="variable-importance-plot-permutations" class="slide level2">
<h2>Variable Importance Plot — Permutations</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a>NumberOfCores<span class="ot">=</span>parallel<span class="sc">::</span><span class="fu">detectCores</span>() </span>
<span id="cb12-2"><a href=""></a>ModelDesignRandFor<span class="ot">=</span><span class="fu">rand_forest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">num.threads =</span> NumberOfCores, <span class="at">importance=</span><span class="st">"permutation"</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb12-4"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb12-5"><a href=""></a></span>
<span id="cb12-6"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb12-7"><a href=""></a>WfModelVax<span class="ot">=</span><span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb12-8"><a href=""></a>          <span class="fu">add_model</span>(ModelDesignRandFor)<span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href=""></a>          <span class="fu">add_recipe</span>(RecipeVax) <span class="sc">%&gt;%</span> </span>
<span id="cb12-10"><a href=""></a>          <span class="fu">add_case_weights</span>(Population) <span class="sc">%&gt;%</span> </span>
<span id="cb12-11"><a href=""></a>          <span class="fu">fit</span>(DataTrain)</span>
<span id="cb12-12"><a href=""></a><span class="fu">vip</span>(<span class="fu">extract_fit_parsnip</span>(WfModelVax))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>

</div>
<img data-src="Interpret_files/figure-revealjs/unnamed-chunk-12-1.png" width="960" class="r-stretch"></section>
<section id="globalmodel-specific-variable-importance-impurity" class="slide level2">
<h2>Global/Model Specific: Variable Importance – Impurity:</h2>
<h4 id="random-forest-1">Random Forest</h4>
<ol type="1">
<li class="fragment"><p>Use Out-of-Bag data from each tree.</p></li>
<li class="fragment"><p>Calculate the decrease of <em>Variance Impurity</em> for regression (<em>Gini</em> for classification) for each split in each tree where the first variable is involved.</p></li>
<li class="fragment"><p>Calculate the (weighted) average of all decreases for the first variable considering alls trees of the <em>Random Forest</em>.</p></li>
<li class="fragment"><p>Repeat steps 2 – 3 for the second, third variables and so on.</p></li>
<li class="fragment"><p>Plot Variable Importance.</p></li>
</ol>
</section>
<section id="variable-importance-plot-impurity" class="slide level2">
<h2>Variable Importance Plot — Impurity:</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a>ModelDesignRandFor<span class="ot">=</span><span class="fu">rand_forest</span>(<span class="at">trees=</span><span class="dv">170</span>, <span class="at">min_n=</span><span class="dv">5</span>, <span class="at">mtry=</span><span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">num.threads =</span> NumberOfCores, <span class="at">importance=</span><span class="st">"impurity"</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb13-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb13-4"><a href=""></a></span>
<span id="cb13-5"><a href=""></a>RecipeVax<span class="ot">=</span><span class="fu">recipe</span>(PercVacFull<span class="sc">~</span>., <span class="at">data=</span>DataTrain)</span>
<span id="cb13-6"><a href=""></a></span>
<span id="cb13-7"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">2021</span>) </span>
<span id="cb13-8"><a href=""></a>WfModelVax<span class="ot">=</span><span class="fu">workflow</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-9"><a href=""></a>          <span class="fu">add_model</span>(ModelDesignRandFor)<span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href=""></a>          <span class="fu">add_recipe</span>(RecipeVax) <span class="sc">%&gt;%</span> </span>
<span id="cb13-11"><a href=""></a>          <span class="fu">add_case_weights</span>(Population) <span class="sc">%&gt;%</span> </span>
<span id="cb13-12"><a href=""></a>          <span class="fu">fit</span>(DataTrain)</span>
<span id="cb13-13"><a href=""></a><span class="fu">vip</span>(<span class="fu">extract_fit_parsnip</span>(WfModelVax))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>

</div>
<img data-src="Interpret_files/figure-revealjs/unnamed-chunk-13-1.png" width="960" class="r-stretch"></section>
<section id="shapley-values-from-a-game-theory-approach" class="slide level2 smaller">
<h2>Shapley Values from a Game Theory Approach</h2>
<h3 id="bruce-carsten-and-greg-are-players-contributing-to-the-profit">Bruce, Carsten, and Greg are Players contributing to the profit</h3>

<img data-src="Images/PermShapleyChartCropped.png" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="shapley-values-from-a-game-theory-approach-1" class="slide level2 smaller">
<h2>Shapley Values from a Game Theory Approach</h2>
<h3 id="estimating-carstens-contribution">Estimating Carsten’s Contribution</h3>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="Images/ShapleyChartCropped.png"></p>
</div><div class="column" data-incremental="true" style="width:40%;">
<p>We do not know at which level Carsten joins:</p>
<ul>
<li class="fragment"><p>Carsten joins last: <span class="math inline">\(\Delta P^{rofit}_{BGC}=5\)</span> <br><br></p></li>
<li class="fragment"><p>Carsten joins second: <br> <span class="math inline">\(\Delta P^{rofit}_{BC}=7\)</span> or <span class="math inline">\(\Delta ^{rofit}_{GC}=8\)</span> <br><br></p></li>
<li class="fragment"><p>Carsten joins first: <span class="math inline">\(\Delta P^{rofit}_{C}=17\)</span> <br><br></p></li>
<li class="fragment"><p>Carsten’s average contribution (Shapley value):<br> <span class="math inline">\(S^{hap}_C=\frac{1}{3}17+\frac{1}{6}7+\frac{1}{6}8+\frac{1}{3}5=9.83\)</span></p></li>
</ul>
</div></div>
</section>
<section id="shapley-values-from-a-game-theory-approach-2" class="slide level2 smaller">
<h2>Shapley Values from a Game Theory Approach</h2>
<h3 id="estimating-brucess-contribution">Estimating Bruces’s Contribution</h3>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="Images/PermShapleyChartCropped.png"></p>
</div><div class="column" data-incremental="true" style="width:40%;">
<p>Calculate Bruce’ contribution as an exercise:</p>
<ul>
<li class="fragment">Spoiler Alert (below is the result):</li>
<li class="fragment">Bruces’s average contribution (Shapley value):<br> <span class="math inline">\(S^{hap}_B=12.33\)</span></li>
</ul>
</div></div>
</section>
<section id="shapley-values-from-a-game-theory-approach-3" class="slide level2 smaller">
<h2>Shapley Values from a Game Theory Approach</h2>
<h3 id="estimating-gregs-contribution">Estimating Greg’s Contribution</h3>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="Images/PermShapleyChartCropped.png"></p>
</div><div class="column" data-incremental="true" style="width:40%;">
<p>Calculate Greg’ contribution as an exercise:</p>
<ul>
<li class="fragment">Spoiler Alert (below is the result):</li>
<li class="fragment">Greg’s average contribution (Shapley value):<br> <span class="math inline">\(S^{hap}_G=13.83\)</span></li>
</ul>
</div></div>
</section>
<section id="shapley-values-from-a-game-theory-approach-4" class="slide level2 smaller">
<h2>Shapley Values from a Game Theory Approach</h2>
<h3 id="starting-profit-shap-values-final-profit">Starting Profit — SHAP values — Final Profit</h3>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="Images/PermShapleyChartCropped.png"></p>
</div><div class="column" data-incremental="true" style="width:40%;">
<p>Initial Profit: <span class="math inline">\(Profit_0=56\)</span></p>
<p>Bruce’s SHAP: <span class="math inline">\(S^{hap}_B=12.33\)</span></p>
<p>Carsten’s SHAP: <span class="math inline">\(S^{hap}_B=9.83\)</span></p>
<p>Greg’s SHAP: <span class="math inline">\(S^{hap}_G=13.83\)</span> <br></p>
<hr>
<p>Profit with 3: <span class="math inline">\(Profit_3=92\)</span></p>
</div></div>
</section>
<section id="shapley-values-from-a-game-theory-approach-5" class="slide level2 smaller">
<h2>Shapley Values from a Game Theory Approach</h2>
<h3 id="coalitions-and-permutations">Coalitions and Permutations</h3>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="Images/PermShapleyChartCropped.png"></p>
</div><div class="column" style="width:40%;">
<ul>
<li class="fragment"><p>Number of coalitions: <span class="math inline">\(N_{coalition }= 2^k=2^3=8\)</span><br><br></p></li>
<li class="fragment"><p>Number of <em>joining</em> scenarios: <span class="math inline">\(k!=3!=1\cdot 2\cdot 3=6\)</span> <br><span class="math inline">\(BCG\)</span>,<span class="math inline">\(BGC\)</span>, <br><span class="math inline">\(CBG\)</span>, <span class="math inline">\(CGB\)</span>, <br><span class="math inline">\(GBC\)</span>, <span class="math inline">\(GCB\)</span></p></li>
<li class="fragment"><p>If all 6 scenarios are calculated, one can can calculate <em>SHAPley</em> values for all contributors (variables).</p></li>
<li class="fragment"><p>If less than 6 scenarios are calculated, one can can estimate <em>SHAPley</em> values for all contributors (variables).</p></li>
</ul>
</div></div>
</section>
<section id="shapley-vs-shap" class="slide level2 smaller">
<h2>SHAPley vs SHAP</h2>
<ul>
<li class="fragment"><p><strong>SHAPley Values</strong> estimate contribution of players</p></li>
<li class="fragment"><p><strong>SHAP</strong> is a computer implementation to estimate <em>SHAPley</em> values for predictors.</p>
<ul>
<li class="fragment">The predictors become the players.</li>
<li class="fragment">The contributions become the <em>SHAP</em> values.</li>
<li class="fragment">For convinience we will use the terms <em>SHAPley Values</em> and <em>SHAP Values</em> interchangeable.</li>
<li class="fragment">We will use the term <strong>SHAP Values</strong> to measure the contribution of specific variables-value combinations.</li>
<li class="fragment">The average prediction (average outcome training data) plus all <em>SHAP</em> values equals the final prediction for the observation..</li>
</ul></li>
</ul>
<div class="fragment">
<p><strong>Example:</strong> The fact that the Republican vote was 62% in the analyzed county, lowered the predicted vaccination rate by 3%. Note, we use variable (<code>Rep</code> <strong>and</strong> value <span class="math inline">\(62%\)</span>). The related <em>SHAP</em> value would be <span class="math inline">\(-0.03\)</span> »</p>
</div>
</section>
<section id="localmodel-agnostic-shap-values-for-orange-county" class="slide level2 smaller">
<h2>Local/Model Agnostic: Shap Values for Orange County</h2>
<!-- Orange row: 141 -->
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="cf">if</span> (<span class="sc">!</span>DraftMode){</span>
<span id="cb14-2"><a href=""></a><span class="fu">library</span>(DALEXtra)</span>
<span id="cb14-3"><a href=""></a>DataTrainPredictorVar<span class="ot">=</span>DataTrain <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href=""></a>                                <span class="fu">select</span>(<span class="sc">-</span>PercVacFull,<span class="sc">-</span>Population)</span>
<span id="cb14-5"><a href=""></a>ExplainerRandFor<span class="ot">=</span><span class="fu">explain_tidymodels</span>(WfModelVax, </span>
<span id="cb14-6"><a href=""></a>                    <span class="at">data=</span>DataTrainPredictorVar,<span class="at">y=</span>DataTrain<span class="sc">$</span>PercVacFull,</span>
<span id="cb14-7"><a href=""></a>                    <span class="at">type=</span><span class="st">"regression"</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>,</span>
<span id="cb14-8"><a href=""></a>                    <span class="at">label =</span> <span class="st">"Vaccination Shap Values Random Forest"</span>)</span>
<span id="cb14-9"><a href=""></a></span>
<span id="cb14-10"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">2021</span>)</span>
<span id="cb14-11"><a href=""></a>ShapValuesID141 <span class="ot">=</span> <span class="fu">predict_parts</span>(</span>
<span id="cb14-12"><a href=""></a>    <span class="at">explainer =</span> ExplainerRandFor, </span>
<span id="cb14-13"><a href=""></a>    <span class="at">new_observation =</span> DataVax[<span class="dv">141</span>,], </span>
<span id="cb14-14"><a href=""></a>    <span class="at">type =</span> <span class="st">"shap"</span>,</span>
<span id="cb14-15"><a href=""></a>    <span class="at">b =</span> <span class="dv">200</span>)</span>
<span id="cb14-16"><a href=""></a>}</span>
<span id="cb14-17"><a href=""></a></span>
<span id="cb14-18"><a href=""></a><span class="co"># to plot use plot(ShapValuesID141)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="columns">
<div class="column" style="width:70%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>County: Orange, CA, Pred. Vac.: 0.72</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="Interpret_files/figure-revealjs/unnamed-chunk-15-1.png" width="960"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Pred. Vac. Rate (all U.S. counties): 0.62</code></pre>
</div>
</div>
</div><div class="column" style="width:30%;">
<p>Mean PercRep: <code>r round(weighted.mean(DataTrain$PercRep, as.numeric(DataTrain$Population)),2)</code></p>
<p>Mean PercAsian: 0.05</p>
<p>Mean PercFoodSt: 0.11</p>
<p>Mean PercBlack: 0.11</p>
<p>Mean PercOld65: 0.21</p>
<p>Mean PercOld65: 0.19</p>
<p>Mean PercYoung25: 0.09</p>
</div></div>
</section>
<section id="shap-values-for-orange-county" class="slide level2 smaller">
<h2>Shap Values for Orange County</h2>
<!-- Orange row: 141 -->
<div class="columns">
<div class="column" style="width:70%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>County: Orange, CA, Pred. Vac.: 0.72</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-446dfe71177607fda79f" style="width:700px;height:400px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-446dfe71177607fda79f">{"x":{"data":[{"orientation":"h","width":[0.90000000000000036,0.89999999999999991],"base":[-0.0070136861467287081,-0.0021915747910597094],"x":[0.0070136861467287081,0.0021915747910597094],"y":[3,1],"text":["variable: PercOld65 = 0.192<br />contribution: -0.007013686<br />factor(sign(contribution)): -1","variable: PercYoung25 = 0.08558<br />contribution: -0.002191575<br />factor(sign(contribution)): -1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(240,90,113,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"-1","legendgroup":"-1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":[0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000013,0.90000000000000036],"base":[0,0,0,0,0],"x":[0.055339354091699183,0.014249843605364592,0.028624560986080592,0.0046379247249027601,0.10822597924599926],"y":[6,4,5,2,7],"text":["variable: PercAsian = 0.2029<br />contribution:  0.055339354<br />factor(sign(contribution)): 1","variable: PercBlack = 0.0162<br />contribution:  0.014249844<br />factor(sign(contribution)): 1","variable: PercFoodSt = 0.05945<br />contribution:  0.028624561<br />factor(sign(contribution)): 1","variable: PercHisp = 0.3405<br />contribution:  0.004637925<br />factor(sign(contribution)): 1","variable: PercRep = 0.4542<br />contribution:  0.108225979<br />factor(sign(contribution)): 1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(139,220,190,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.055339354091699183,0.056322538312238879,0.043220474285210808,0.044901740024398396,0.058644068008693262,0.060806908910622126,0.049094726142425271,0.072511615340108637,0.044469414893960502,0.053703250444660289,0.045709701481858489,0.058186312563736298,0.043968046242120584,0.044901740024398396,0.055168375379236245,0.072511615340108637,0.069806556172896439,0.049094726142425271,0.056998466755015187,0.053821563249202509,0.053605358368136624,0.058644068008693262,0.06773941280111373,0.051847797735582457,0.060806908910622126,0.056998466755015187,0.014249843605364592,0.0083254711104727708,0.01427114115196515,0.02348576810293157,0.021315075114781923,0.015881667002079047,0.0065178143618139783,0.0067176115015129545,0.015881667002079047,0.015881667002079047,0.013324629041367886,0.015881667002079047,0.015881667002079047,0.009020641841556043,0.016702246544981092,0.014172900447806835,0.02348576810293157,0.015881667002079047,0.0065014917581501797,0.0083254711104727708,0.014172900447806835,0.0083254711104727708,0.015881667002079047,0.01427114115196515,0.015881667002079047,0.020257211216492932,0.036505570759397754,0.020994899457646099,0.03304629838718276,0.044710120019014643,0.01735122054462479,0.045141708244905154,0.01735122054462479,0.024554583758595205,0.028742173763819712,0.024554583758595205,0.021997545797884044,0.044710120019014643,0.01735122054462479,0.028624560986080592,0.031662886735667306,0.02238299707882907,0.015135091423752134,0.024554583758595205,0.044710120019014643,0.026712252664238045,0.030861497648482561,0.02353112169067173,0.024554583758595205,0.036505570759397754,0.032157402215111319,0.025834651299730282,0.0061057363375195406,0.0007410946854815581,0.0049948821247287611,0.0074471502698645331,0.0023872844117911463,0.0046379247249027601,0.00024871348824029305,0.0088445350511908716,0.00065514945058198215,0.0061057363375195406,0.0066414055137010708,0.0030644677998188374,0.00024871348824029305,0.0061057363375195406,0.0031154113600249111,0.021618884922612991,0.0024229119210342764,0.0023872844117911463,0.0030644677998188374,0.0099863053107748234,-0.016221386602666032,0.014440112036295805,0.0059728676062378305,0.00024871348824029305,0.012206529212181239,0.0031154113600249111,-0.0066630680073125337,-0.0084941970530827415,-0.013132098526019376,-0.011558574459829329,0.00022376681900526663,-0.010913745187166479,-0.00082359047140490027,-0.00082359047140490027,-0.00082359047140490027,-0.0086752977516098007,0.00034571987036691176,-0.0078180621279217988,-0.013132098526019376,-0.0093801692943787929,-0.005925419481731975,-0.005925419481731975,-0.00082359047140490027,-0.0070136861467287081,-0.012539214065867776,-0.0015226119732769661,-0.0095520102093687997,-0.011507630899623256,-0.011507630899623256,-0.004403402051698313,-0.0084589975760844816,-0.011507630899623256,0.11484602781688991,0.10822597924599926,0.11484602781688991,0.11189716049888765,0.12101168796570472,0.10112829494061848,0.10273030318899612,0.1155422100105421,0.10494643230986878,0.10112829494061848,0.11775086193233886,0.11484602781688991,0.10998746493676081,0.09877095353517984,0.10112829494061848,0.10121882047447861,0.11552598056598617,0.10273030318899612,0.10112829494061848,0.11484602781688991,0.095340118009071273,0.096446381806691517,0.11484602781688991,0.10121882047447861,0.11484602781688991,0.11694263558818707,-0.0089944393365962716,-0.0021533235481037138,-0.0040149470021343392,-0.0093549528780989544,-0.0020485485381913637,0.0037263366271119702,-0.0089944393365962716,-0.0021533235481037138,0.0010451229944831164,0.0040683173966820085,0.0020344836790631149,0.0018831725399638399,0.00042395782894921741,0.0020344836790631149,-0.00021044248497747997,-0.0093549528780989544,0.00042395782894921741,0.0012241674990962625,-0.00073011054597027503,0.0063229333674370558,-0.0033620059026530091,-0.0012671004616565673,-0.0089944393365962716,-0.0021915747910597094,-0.0073488380829181965,-0.0089944393365962716],"y":[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"hoverinfo":"x","type":"box","fillcolor":"rgba(55,30,163,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(55,30,163,1)","width":1.8897637795275593},"showlegend":false,"xaxis":"x","yaxis":"y","orientation":"h","frame":null}],"layout":{"margin":{"t":39.246160232461605,"r":7.3059360730593621,"b":38.854296388542963,"l":150.4358655043587},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.023083040331084569,0.12787334169412326],"tickmode":"array","ticktext":["0.00","0.04","0.08","0.12"],"tickvals":[0,0.040000000000000001,0.079999999999999988,0.12],"categoryorder":"array","categoryarray":["0.00","0.04","0.08","0.12"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835198},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(229,229,229,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"annotations":[{"text":"contribution","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-23.511830635118308},{"text":"Vaccination Shap Values Random Forest","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":15.940224159402243},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,7.5999999999999996],"tickmode":"array","ticktext":["PercYoung25 = 0.08558","PercHisp = 0.3405","PercOld65 = 0.192","PercBlack = 0.0162","PercFoodSt = 0.05945","PercAsian = 0.2029","PercRep = 0.4542"],"tickvals":[1,2,3,4.0000000000000009,5,6,7],"categoryorder":"array","categoryarray":["PercYoung25 = 0.08558","PercHisp = 0.3405","PercOld65 = 0.192","PercBlack = 0.0162","PercFoodSt = 0.05945","PercAsian = 0.2029","PercRep = 0.4542"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835205},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":15.940224159402243,"yanchor":1,"ysizemode":"pixel"}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","width":700,"height":400,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"5f907f1c1e8b":{"x":{},"y":{},"fill":{},"type":"bar"},"5f90552a4736":{"x":{},"y":{}}},"cur_data":"5f907f1c1e8b","visdat":{"5f907f1c1e8b":["function (y) ","x"],"5f90552a4736":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Pred. Vac. Rate (all U.S. counties; unweighted): 0.51</code></pre>
</div>
</div>
</div><div class="column" style="width:30%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PercYoung25 = 0.08558"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PercHisp = 0.3405"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PercBlack = 0.0162"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PercFoodSt = 0.05945"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PercAsian = 0.2029"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "PercRep = 0.4542"</code></pre>
</div>
</div>
</div></div>
<p>🤓 Below is a link to an R script that allows you to create your own SHAP values in R.</p>
<div class="footer">
<p>Create your own SHAP values in R: <a href="https://econ.lange-analytics.com/RScripts/InterpretVac.R">Click here and execute in RStudio</a></p>
</div>
</section>
<section id="shap-values-for-two-counties-different-politic.-impact" class="slide level2">
<h2>Shap Values for Two Counties (different Politic. Impact)</h2>
<!-- Orange row: 141 Merced row: 137 -->
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>County: Orange, CA, Pred. Vac.: 0.72</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-934797e7fdfc97cfa510" style="width:470px;height:230px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-934797e7fdfc97cfa510">{"x":{"data":[{"orientation":"h","width":[0.90000000000000036,0.89999999999999991],"base":[-0.0070136861467287081,-0.0021915747910597094],"x":[0.0070136861467287081,0.0021915747910597094],"y":[3,1],"text":["variable: PercOld65 = 0.192<br />contribution: -0.007013686<br />factor(sign(contribution)): -1","variable: PercYoung25 = 0.08558<br />contribution: -0.002191575<br />factor(sign(contribution)): -1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(240,90,113,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"-1","legendgroup":"-1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":[0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000013,0.90000000000000036],"base":[0,0,0,0,0],"x":[0.055339354091699183,0.014249843605364592,0.028624560986080592,0.0046379247249027601,0.10822597924599926],"y":[6,4,5,2,7],"text":["variable: PercAsian = 0.2029<br />contribution:  0.055339354<br />factor(sign(contribution)): 1","variable: PercBlack = 0.0162<br />contribution:  0.014249844<br />factor(sign(contribution)): 1","variable: PercFoodSt = 0.05945<br />contribution:  0.028624561<br />factor(sign(contribution)): 1","variable: PercHisp = 0.3405<br />contribution:  0.004637925<br />factor(sign(contribution)): 1","variable: PercRep = 0.4542<br />contribution:  0.108225979<br />factor(sign(contribution)): 1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(139,220,190,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.055339354091699183,0.056322538312238879,0.043220474285210808,0.044901740024398396,0.058644068008693262,0.060806908910622126,0.049094726142425271,0.072511615340108637,0.044469414893960502,0.053703250444660289,0.045709701481858489,0.058186312563736298,0.043968046242120584,0.044901740024398396,0.055168375379236245,0.072511615340108637,0.069806556172896439,0.049094726142425271,0.056998466755015187,0.053821563249202509,0.053605358368136624,0.058644068008693262,0.06773941280111373,0.051847797735582457,0.060806908910622126,0.056998466755015187,0.014249843605364592,0.0083254711104727708,0.01427114115196515,0.02348576810293157,0.021315075114781923,0.015881667002079047,0.0065178143618139783,0.0067176115015129545,0.015881667002079047,0.015881667002079047,0.013324629041367886,0.015881667002079047,0.015881667002079047,0.009020641841556043,0.016702246544981092,0.014172900447806835,0.02348576810293157,0.015881667002079047,0.0065014917581501797,0.0083254711104727708,0.014172900447806835,0.0083254711104727708,0.015881667002079047,0.01427114115196515,0.015881667002079047,0.020257211216492932,0.036505570759397754,0.020994899457646099,0.03304629838718276,0.044710120019014643,0.01735122054462479,0.045141708244905154,0.01735122054462479,0.024554583758595205,0.028742173763819712,0.024554583758595205,0.021997545797884044,0.044710120019014643,0.01735122054462479,0.028624560986080592,0.031662886735667306,0.02238299707882907,0.015135091423752134,0.024554583758595205,0.044710120019014643,0.026712252664238045,0.030861497648482561,0.02353112169067173,0.024554583758595205,0.036505570759397754,0.032157402215111319,0.025834651299730282,0.0061057363375195406,0.0007410946854815581,0.0049948821247287611,0.0074471502698645331,0.0023872844117911463,0.0046379247249027601,0.00024871348824029305,0.0088445350511908716,0.00065514945058198215,0.0061057363375195406,0.0066414055137010708,0.0030644677998188374,0.00024871348824029305,0.0061057363375195406,0.0031154113600249111,0.021618884922612991,0.0024229119210342764,0.0023872844117911463,0.0030644677998188374,0.0099863053107748234,-0.016221386602666032,0.014440112036295805,0.0059728676062378305,0.00024871348824029305,0.012206529212181239,0.0031154113600249111,-0.0066630680073125337,-0.0084941970530827415,-0.013132098526019376,-0.011558574459829329,0.00022376681900526663,-0.010913745187166479,-0.00082359047140490027,-0.00082359047140490027,-0.00082359047140490027,-0.0086752977516098007,0.00034571987036691176,-0.0078180621279217988,-0.013132098526019376,-0.0093801692943787929,-0.005925419481731975,-0.005925419481731975,-0.00082359047140490027,-0.0070136861467287081,-0.012539214065867776,-0.0015226119732769661,-0.0095520102093687997,-0.011507630899623256,-0.011507630899623256,-0.004403402051698313,-0.0084589975760844816,-0.011507630899623256,0.11484602781688991,0.10822597924599926,0.11484602781688991,0.11189716049888765,0.12101168796570472,0.10112829494061848,0.10273030318899612,0.1155422100105421,0.10494643230986878,0.10112829494061848,0.11775086193233886,0.11484602781688991,0.10998746493676081,0.09877095353517984,0.10112829494061848,0.10121882047447861,0.11552598056598617,0.10273030318899612,0.10112829494061848,0.11484602781688991,0.095340118009071273,0.096446381806691517,0.11484602781688991,0.10121882047447861,0.11484602781688991,0.11694263558818707,-0.0089944393365962716,-0.0021533235481037138,-0.0040149470021343392,-0.0093549528780989544,-0.0020485485381913637,0.0037263366271119702,-0.0089944393365962716,-0.0021533235481037138,0.0010451229944831164,0.0040683173966820085,0.0020344836790631149,0.0018831725399638399,0.00042395782894921741,0.0020344836790631149,-0.00021044248497747997,-0.0093549528780989544,0.00042395782894921741,0.0012241674990962625,-0.00073011054597027503,0.0063229333674370558,-0.0033620059026530091,-0.0012671004616565673,-0.0089944393365962716,-0.0021915747910597094,-0.0073488380829181965,-0.0089944393365962716],"y":[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],"hoverinfo":"x","type":"box","fillcolor":"rgba(55,30,163,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(55,30,163,1)","width":1.8897637795275593},"showlegend":false,"xaxis":"x","yaxis":"y","orientation":"h","frame":null}],"layout":{"margin":{"t":39.246160232461605,"r":7.3059360730593621,"b":38.854296388542977,"l":150.43586550435862},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.023083040331084569,0.12787334169412326],"tickmode":"array","ticktext":["0.00","0.04","0.08","0.12"],"tickvals":[0,0.040000000000000001,0.079999999999999988,0.12],"categoryorder":"array","categoryarray":["0.00","0.04","0.08","0.12"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835205},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(229,229,229,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"annotations":[{"text":"contribution","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-23.511830635118312},{"text":"Vaccination Shap Values Random Forest","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":15.940224159402243},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,7.5999999999999996],"tickmode":"array","ticktext":["PercYoung25 = 0.08558","PercHisp = 0.3405","PercOld65 = 0.192","PercBlack = 0.0162","PercFoodSt = 0.05945","PercAsian = 0.2029","PercRep = 0.4542"],"tickvals":[1,2,3,4.0000000000000009,5,6,7],"categoryorder":"array","categoryarray":["PercYoung25 = 0.08558","PercHisp = 0.3405","PercOld65 = 0.192","PercBlack = 0.0162","PercFoodSt = 0.05945","PercAsian = 0.2029","PercRep = 0.4542"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835198},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":15.940224159402243,"yanchor":1,"ysizemode":"pixel"}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716894984}},"hovermode":"closest","width":470,"height":230,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"5f9025f1824":{"x":{},"y":{},"fill":{},"type":"bar"},"5f9021f9585a":{"x":{},"y":{}}},"cur_data":"5f9025f1824","visdat":{"5f9025f1824":["function (y) ","x"],"5f9021f9585a":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Pred. Vac. Rate (all U.S. counties): 0.62</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>County: Merced, CA, Pred. Vac.: 0.52</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-1a4f2d4152e31b3cf5e1" style="width:470px;height:230px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1a4f2d4152e31b3cf5e1">{"x":{"data":[{"orientation":"h","width":[0.90000000000000036,0.90000000000000013,0.90000000000000036,0.90000000000000036],"base":[-0.01995277223135259,-0.012872793122747672,-0.039381511129938492,-0.014989737085858035],"x":[0.01995277223135259,0.012872793122747672,0.039381511129938492,0.014989737085858035],"y":[4,2,6,3],"text":["variable: PercFoodSt = 0.1857<br />contribution: -0.019952772<br />factor(sign(contribution)): -1","variable: PercHisp = 0.5963<br />contribution: -0.012872793<br />factor(sign(contribution)): -1","variable: PercOld65 = 0.157<br />contribution: -0.039381511<br />factor(sign(contribution)): -1","variable: PercYoung25 = 0.1053<br />contribution: -0.014989737<br />factor(sign(contribution)): -1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(240,90,113,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"-1","legendgroup":"-1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":[0.90000000000000036,0.89999999999999991,0.90000000000000036],"base":[0,0,0],"x":[0.011834523094122163,0.0064638432380188402,0.074495993213378575],"y":[5,1,7],"text":["variable: PercAsian = 0.0724<br />contribution:  0.011834523<br />factor(sign(contribution)): 1","variable: PercBlack = 0.0288<br />contribution:  0.006463843<br />factor(sign(contribution)): 1","variable: PercRep = 0.4482<br />contribution:  0.074495993<br />factor(sign(contribution)): 1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(139,220,190,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.011834523094122163,-0.0015732306617010083,-0.037876257982372485,0.048544149038747486,-0.0055828018491850262,-0.0095265961436145075,0.043999114728165645,-0.024367139189917286,0.037283537361927244,0.032302668423586811,0.042079283525475297,0.012275252067983522,0.021095686033587469,0.048544149038747486,0.01353934171233695,-0.024367139189917286,0.051587482787048611,0.043999114728165645,-0.056575767512075159,0.012043934050353589,0.033556626064600081,-0.0055828018491850262,0.050157610326258983,0.036409225499726694,-0.0095265961436145075,-0.056575767512075159,0.0064638432380188402,-0.022466871503794561,0.010096182173392587,0.018274446031851466,0.0076707879823201264,0.012982533182781419,0.015170249652871892,-0.01320789330750971,0.012982533182781419,0.012982533182781419,0.014245919817089336,0.012982533182781419,0.012982533182781419,0.011939313325677436,0.0090285055623788857,0.0083379385630640845,0.018274446031851466,0.012982533182781419,0.00991720459330514,-0.022466871503794561,0.0083379385630640845,-0.022466871503794561,0.012982533182781419,0.010096182173392587,0.012982533182781419,-0.0030447911631460434,-0.025369184447601167,-0.016956821802294297,-0.015777747541633969,-0.040683224842382071,-0.0062672558966366809,-0.03344003399712181,-0.0062672558966366809,-0.014647789847114123,-0.017473725137580221,-0.014647789847114123,-0.013384403212806206,-0.040683224842382071,-0.0062672558966366809,-0.01995277223135259,-0.018212666834905966,-0.032027830931146695,-0.010450648299998089,-0.014647789847114123,-0.040683224842382071,-0.019511438798898162,-0.016792179885142866,-0.018945947561482268,-0.014647789847114123,-0.025369184447601167,-0.017880337299169047,-0.017784553980920048,-0.04696882182021811,-0.00077648443258804267,0.0034935215313809387,-0.0071797361684257099,0.0018443376467678352,-0.012872793122747672,-0.042696484358094589,-0.0042235837348185701,-0.0054710466681743286,-0.04696882182021811,-0.0057694783666172311,0.0072529937588273197,-0.042696484358094589,-0.04696882182021811,0.0034359458767269091,-0.014760193498060237,0.00075181307524141427,0.0018443376467678352,0.0072529937588273197,-0.016465749192099421,-0.038313427908982733,0.00071514112405202113,0.0046084321700270436,-0.042696484358094589,0.0055003279706670183,0.0034359458767269091,-0.022153568129308465,-0.039026851744853763,-0.024051189150837038,-0.024617327840703029,-0.050582206878085345,-0.028962186329818451,-0.077348170307172004,-0.077348170307172004,-0.077348170307172004,-0.017314549565991211,-0.054056244523770558,-0.012347564309684422,-0.024051189150837038,-0.034523730678494513,-0.039263502714668386,-0.039263502714668386,-0.077348170307172004,-0.039381511129938492,-0.02767031423046129,-0.0567508811336771,-0.013548696099318303,-0.02843437572280344,-0.02843437572280344,-0.048099418152909523,-0.033559046503277123,-0.02843437572280344,0.010776782136648566,0.074495993213378575,0.010776782136648566,0.036289417503405197,0.10216831099267609,0.10126023963508834,0.096129918914253598,0.089799264454126226,0.10031331131761501,0.10126023963508834,0.10546292699033827,0.010776782136648566,0.11335838630035922,0.10059274163699722,0.10126023963508834,0.094966718222514679,0.078562896638767588,0.096129918914253598,0.10126023963508834,0.010776782136648566,0.089265889337945659,0.11031356160963141,0.010776782136648566,0.094966718222514679,0.010776782136648566,0.084378197918821063,-0.063965410627038199,-0.018203523847237224,0.011266366057280264,-0.042867528814536149,-0.0024626684371219509,-0.0033058576971662923,-0.063965410627038199,-0.018203523847237224,0.017473309757147615,0.0013241604795239947,0.0010258509455857157,-0.0077844777273897714,-0.0018605000638031166,0.0010258509455857157,-0.00073555805994807155,-0.042867528814536149,-0.0018605000638031166,0.0013469053514145735,-0.0087855939361292101,0.0045708210014540063,-0.0080993412303465018,0.013093998327112888,-0.063965410627038199,-0.014989737085858035,-0.012972444964148067,-0.063965410627038199],"y":[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],"hoverinfo":"x","type":"box","fillcolor":"rgba(55,30,163,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(55,30,163,1)","width":1.8897637795275593},"showlegend":false,"xaxis":"x","yaxis":"y","orientation":"h","frame":null}],"layout":{"margin":{"t":39.246160232461605,"r":7.3059360730593621,"b":38.854296388542977,"l":143.79410543794103},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.086883498137548559,0.12289371413073577],"tickmode":"array","ticktext":["-0.05","0.00","0.05","0.10"],"tickvals":[-0.050000000000000003,0,0.050000000000000017,0.10000000000000001],"categoryorder":"array","categoryarray":["-0.05","0.00","0.05","0.10"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835205},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(229,229,229,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"annotations":[{"text":"contribution","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-23.511830635118312},{"text":"Vaccination Shap Values Random Forest","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":15.940224159402243},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,7.5999999999999996],"tickmode":"array","ticktext":["PercBlack = 0.0288","PercHisp = 0.5963","PercYoung25 = 0.1053","PercFoodSt = 0.1857","PercAsian = 0.0724","PercOld65 = 0.157","PercRep = 0.4482"],"tickvals":[1,2,3,4.0000000000000009,5,6,7],"categoryorder":"array","categoryarray":["PercBlack = 0.0288","PercHisp = 0.5963","PercYoung25 = 0.1053","PercFoodSt = 0.1857","PercAsian = 0.0724","PercOld65 = 0.157","PercRep = 0.4482"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835198},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":15.940224159402243,"yanchor":1,"ysizemode":"pixel"}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716894984}},"hovermode":"closest","width":470,"height":230,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"5f90736da1a":{"x":{},"y":{},"fill":{},"type":"bar"},"5f907d314246":{"x":{},"y":{}}},"cur_data":"5f90736da1a","visdat":{"5f90736da1a":["function (y) ","x"],"5f907d314246":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Pred. Vac. Rate (all U.S. counties): 0.62</code></pre>
</div>
</div>
</div></div>
</section>
<section id="shap-values-for-two-counties-different-asian-impact" class="slide level2">
<h2>Shap Values for Two Counties (different Asian Impact)</h2>
<!-- Marin, CA row: 135 San Joaquim, CA row: 149 -->
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>County: Marin, CA, Pred. Vac.: 0.85</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-2dd312bafbaec6e5ac88" style="width:470px;height:230px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2dd312bafbaec6e5ac88">{"x":{"data":[{"orientation":"h","width":[0.90000000000000036,0.90000000000000036,0.90000000000000036,0.90000000000000036,0.89999999999999991,0.90000000000000036,0.90000000000000013],"base":[0,0,0,0,0,0,0],"x":[0.082969513125545791,0.01734873511791225,0.042210489276710346,0.03157779527650971,0.0085620085449454111,0.14078392611514784,0.0091296401418400602],"y":[6,3,5,4,1,7,2],"text":["variable: PercAsian = 0.0581<br />contribution: 0.082969513<br />factor(sign(contribution)): 1","variable: PercBlack = 0.0213<br />contribution: 0.017348735<br />factor(sign(contribution)): 1","variable: PercFoodSt = 0.02541<br />contribution: 0.042210489<br />factor(sign(contribution)): 1","variable: PercHisp = 0.1598<br />contribution: 0.031577795<br />factor(sign(contribution)): 1","variable: PercOld65 = 0.28<br />contribution: 0.008562009<br />factor(sign(contribution)): 1","variable: PercRep = 0.1644<br />contribution: 0.140783926<br />factor(sign(contribution)): 1","variable: PercYoung25 = 0.06024<br />contribution: 0.009129640<br />factor(sign(contribution)): 1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(139,220,190,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.082969513125545791,0.11080906287203107,0.095611453093250698,0.046151993334367925,0.11037214577618704,0.092606134677687746,0.043391979180148033,0.11372022823538652,0.041930850246130968,0.06412899004441075,0.074498265836021038,0.065137988300344118,0.042126502753757178,0.046151993334367925,0.09507213994034136,0.11372022823538652,0.092137430117901431,0.043391979180148033,0.12214853548255378,0.072623484729266607,0.10156557425254786,0.11037214577618704,0.085671978274018401,0.076142074305961205,0.092606134677687746,0.12214853548255378,0.01734873511791225,0.032495211311552752,0.015040902084622276,0.014462526701722211,0.014217422371039623,0.014194511234144169,0.019285813357276749,0.015731913330255032,0.014194511234144169,0.014194511234144169,0.0075554548598081306,0.014194511234144169,0.014194511234144169,0.022056445586574713,0.018461767787479988,0.01481159450034808,0.014462526701722211,0.014194511234144169,0.020441073052758552,0.032495211311552752,0.01481159450034808,0.032495211311552752,0.014194511234144169,0.015040902084622276,0.014194511234144169,0.016296717221416679,0.058783642470613628,0.04545443448845865,0.052935494026406515,0.092497748243155931,0.015996287821312571,0.0779746548349598,0.015996287821312571,0.018069010694724996,0.031676726970403468,0.018069010694724996,0.011429954320388958,0.092497748243155931,0.015996287821312571,0.042210489276710346,0.068875322992965726,0.050287700479456077,0.026124389471448239,0.018069010694724996,0.092497748243155931,0.032462004029190639,0.034442844195689881,0.012200309041387691,0.018069010694724996,0.058783642470613628,0.058542830270560953,0.037530130882909352,0.071595371174277278,-0.003339072749974803,-0.0012796998324482445,0.017851987296870431,0.0019215066879377796,0.03157779527650971,0.065453720133972659,0.055275514697174177,0.026302406374251075,0.071595371174277278,0.018353040183343827,-0.00065109891267367548,0.065453720133972659,0.071595371174277278,0.00022266615398969236,0.063167063927110023,0.024300710144637416,0.0019215066879377796,-0.00065109891267367548,0.061764363301433756,0.029385323410577424,0.04916457505452354,0.020239585010937811,0.065453720133972659,0.014125663311048919,0.00022266615398969236,0.0046078812483625331,0.0041356098089494475,0.010000110893096714,0.0022313104073808931,0.012704239639469761,0.0023078927456524623,0.022742284129295687,0.022742284129295687,0.022742284129295687,0.0069508934427876534,0.014934350363681737,0.0080750235804214476,0.010000110893096714,0.0030782474666511961,0.0063950541311550424,0.0063950541311550424,0.022742284129295687,0.0085620085449454111,0.0011495531396367165,0.0087921680588891604,0.00020209832076678591,0.003105075474044261,0.003105075474044261,0.0091743993000895641,0.0026318531130768985,0.003105075474044261,0.2001523501764878,0.14078392611514784,0.2001523501764878,0.19002766328853382,0.13854608908433785,0.098478392585108265,0.10522575560771397,0.17292804463080458,0.095097653957578299,0.098478392585108265,0.14928676842033983,0.2001523501764878,0.12217985292012967,0.10966691631579528,0.098478392585108265,0.10640593407569088,0.17143013608583957,0.10522575560771397,0.098478392585108265,0.2001523501764878,0.11948780282641247,0.09665278724150983,0.2001523501764878,0.10640593407569088,0.2001523501764878,0.13620338734124493,0.023980895369962396,0.005717282860451034,0.0088968788519679931,0.019406838642678004,-0.0026779372693790382,0.0023817769371273778,0.023980895369962396,0.005717282860451034,0.00802442394112024,0.0099610500292903748,0.0010034517822020694,0.012805301186309292,0.0018498426326801765,0.0010034517822020694,0.00070403250495620906,0.019406838642678004,0.0018498426326801765,0.00039543780436734899,0.010484441201870309,0.0041176161805965839,-0.0017989114624278324,0.010863974660734854,0.023980895369962396,0.0091296401418400602,0.012204505663595655,0.023980895369962396],"y":[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],"hoverinfo":"x","type":"box","fillcolor":"rgba(55,30,163,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(55,30,163,1)","width":1.8897637795275593},"showlegend":false,"xaxis":"x","yaxis":"y","orientation":"h","frame":null}],"layout":{"margin":{"t":39.246160232461605,"r":7.3059360730593621,"b":38.854296388542977,"l":150.43586550435862},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.013513643896297934,0.21032692132281094],"tickmode":"array","ticktext":["0.00","0.05","0.10","0.15","0.20"],"tickvals":[0,0.050000000000000003,0.10000000000000001,0.15000000000000002,0.20000000000000001],"categoryorder":"array","categoryarray":["0.00","0.05","0.10","0.15","0.20"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835205},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(229,229,229,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"annotations":[{"text":"contribution","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-23.511830635118312},{"text":"Vaccination Shap Values Random Forest","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":15.940224159402243},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,7.5999999999999996],"tickmode":"array","ticktext":["PercOld65 = 0.28","PercYoung25 = 0.06024","PercBlack = 0.0213","PercHisp = 0.1598","PercFoodSt = 0.02541","PercAsian = 0.0581","PercRep = 0.1644"],"tickvals":[1,2,3,4.0000000000000009,5,6,7],"categoryorder":"array","categoryarray":["PercOld65 = 0.28","PercYoung25 = 0.06024","PercBlack = 0.0213","PercHisp = 0.1598","PercFoodSt = 0.02541","PercAsian = 0.0581","PercRep = 0.1644"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835198},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":15.940224159402243,"yanchor":1,"ysizemode":"pixel"}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716894984}},"hovermode":"closest","width":470,"height":230,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"5f904cd85f84":{"x":{},"y":{},"fill":{},"type":"bar"},"5f90299d4228":{"x":{},"y":{}}},"cur_data":"5f904cd85f84","visdat":{"5f904cd85f84":["function (y) ","x"],"5f90299d4228":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Pred. Vac. Rate (all U.S. counties): 0.62</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>County: San Joaquin, CA, Pred. Vac.: 0.58</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-95f7b41c590915fc9100" style="width:470px;height:230px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-95f7b41c590915fc9100">{"x":{"data":[{"orientation":"h","width":[0.89999999999999991,0.90000000000000036,0.90000000000000013,0.90000000000000036,0.90000000000000036],"base":[-0.0025429916761042139,-0.017371277914551588,-0.0056603446831513526,-0.026059990575778517,-0.010555945023058337],"x":[0.0025429916761042139,0.017371277914551588,0.0056603446831513526,0.026059990575778517,0.010555945023058337],"y":[1,4,2,5,3],"text":["variable: PercBlack = 0.0674<br />contribution: -0.002542992<br />factor(sign(contribution)): -1","variable: PercFoodSt = 0.1389<br />contribution: -0.017371278<br />factor(sign(contribution)): -1","variable: PercHisp = 0.414<br />contribution: -0.005660345<br />factor(sign(contribution)): -1","variable: PercOld65 = 0.1781<br />contribution: -0.026059991<br />factor(sign(contribution)): -1","variable: PercYoung25 = 0.09171<br />contribution: -0.010555945<br />factor(sign(contribution)): -1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(240,90,113,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"-1","legendgroup":"-1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"h","width":[0.90000000000000036,0.90000000000000036],"base":[0,0],"x":[0.026474743967849698,0.10194203115046532],"y":[6,7],"text":["variable: PercAsian = 0.152<br />contribution:  0.026474744<br />factor(sign(contribution)): 1","variable: PercRep = 0.423<br />contribution:  0.101942031<br />factor(sign(contribution)): 1"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(139,220,190,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"1","legendgroup":"1","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.026474743967849698,0.040694557221370387,-0.029127102423973539,0.032173505614665365,0.045865379560283803,0.00085414371913405951,0.043951604617689655,0.0036038146723944564,0.048672471146133156,0.043381627087437646,0.044764659323316081,0.046060828114505126,0.046890852447510456,0.044764659323316081,0.044695513064462511,0.044997966510739285,0.044997966510739285,-0.029127102423973539,0.015055863841140216,-0.029127102423973539,0.046890852447510456,0.044764659323316081,0.019305968571313503,-0.029127102423973539,0.046379021480546012,0.02961109429461295,0.0063885072354482597,0.0095959646643639651,-0.0049352398380104745,0.0066244769557306515,-0.0025429916761042139,-0.011136829920109781,0.0037471701060086682,0.0018077888226749605,0.0026642502674738555,0.0034669214895276523,0.00205578188189115,-0.0067975847015576685,-0.0059887677736752964,-3.9288669033799017e-05,-0.01954554584201762,-0.0067975847015576685,-0.01954554584201762,-0.01954554584201762,0.007922834085103525,0.0051858731788017032,0.0023818550559660534,0.0026642502674738555,0.0034669214895276523,0.0034669214895276523,-0.01954554584201762,-0.011136829920109781,-0.011682731119475043,-0.034373844866068537,-0.011682731119475043,-0.0093336604020579639,-0.012869228076405115,-0.0089300940142061913,-0.017371277914551588,-0.010602886586830507,-0.011985918822708941,-0.012898763158555537,-0.012849825185331176,-0.023384246873431214,-0.012898763158555537,-0.01184450621055988,-0.010977598531091259,-0.010977598531091259,-0.034373844866068537,-0.012471578748970202,-0.034373844866068537,-0.011682731119475043,-0.034373844866068537,-0.017193073319347163,-0.025965128944160698,-0.011578773024888744,-0.010602886586830507,-0.034373844866068537,0.0033811952964024616,-0.035687495581183004,0.0033811952964024616,0.0055073884205968371,-0.0056603446831513526,-0.010877139974599936,0.0033811952964024616,0.0030064833521417089,0.0060303026161977469,0.0027521232636897874,0.0033811952964024616,0.0033811952964024616,0.0033811952964024616,-0.0063301101918125102,0.0051367510736474165,0.0022290659452565142,0.0049406020060821509,0.0036432272570140478,0.011559837480865975,-0.00077557474696243744,-0.055898367097869217,-0.0074652961025821751,0.0041789363024353765,-0.055898367097869217,-7.6426225311232443e-05,-0.037771729556936418,-0.012948660808283385,-0.023750675084802997,-0.03354123876737547,-0.020312227154599571,-0.014151294864929942,-0.023128996916002564,-0.023750675084802997,-0.043232860467765311,-0.043232860467765311,-0.021668631899907642,-0.015297731525700464,-0.043232860467765311,-0.0010212538425758977,-0.02827299909074471,-0.023750675084802997,-0.019541093206441706,-0.031889837795331277,-0.043232860467765311,-0.043232860467765311,-0.010501943371397315,-0.023459389024394262,-0.015297731525700464,-0.017215337161975541,-0.026059990575778517,-0.032602209378101876,-0.043232860467765311,0.12360860273835395,0.050034474143478946,0.12381720811849295,0.10400549168704631,0.084656652082212513,0.11227525339599864,0.10604954475693396,0.10604954475693396,0.12579954207257876,0.080708701521317483,0.10887794733523803,0.10911474660191955,0.1072231170566057,0.10194203115046532,0.067843511758183817,0.10802848635323137,0.10604954475693396,0.10807957850140459,0.10604954475693396,0.066165599588409396,0.1048396665681578,0.13515079868549595,0.06958656362873239,0.12333154819223169,0.10604954475693396,0.10515556494787348,0.0088401250148499866,-0.0016506447935931146,-0.048460495976357154,0.0036153990998243346,-0.03782984488669372,0.0056487139864320191,0.016214597764249494,-0.048460495976357154,0.001603521769263816,-0.031269307901620524,-0.012982390124059551,0.0028597845747894146,-0.03782984488669372,0.0088401250148499866,-0.010555945023058337,0.0069620027994111711,-0.028976478303244901,-0.0028795726396765309,0.0062810622626626733,0.001603521769263816,0.0073523473023531238,-0.033850189972350009,-0.018888185030918048,0.016214597764249494,0.001603521769263816,-0.048460495976357154],"y":[6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],"hoverinfo":"x","type":"box","fillcolor":"rgba(55,30,163,1)","marker":{"opacity":null,"outliercolor":"rgba(0,0,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"},"size":5.6692913385826778},"line":{"color":"rgba(55,30,163,1)","width":1.8897637795275593},"showlegend":false,"xaxis":"x","yaxis":"y","orientation":"h","frame":null}],"layout":{"margin":{"t":39.246160232461605,"r":7.3059360730593621,"b":38.854296388542977,"l":150.43586550435862},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.065450825387037476,0.14470325697466421],"tickmode":"array","ticktext":["-0.05","0.00","0.05","0.10"],"tickvals":[-0.050000000000000003,0,0.050000000000000003,0.10000000000000001],"categoryorder":"array","categoryarray":["-0.05","0.00","0.05","0.10"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835205},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(229,229,229,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":"","hoverformat":".2f"},"annotations":[{"text":"contribution","x":0.5,"y":0,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":14.611872146118724},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis","yshift":-23.511830635118312},{"text":"Vaccination Shap Values Random Forest","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(55,30,163,1)","family":"","size":15.940224159402243},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"}],"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,7.5999999999999996],"tickmode":"array","ticktext":["PercBlack = 0.0674","PercHisp = 0.414","PercYoung25 = 0.09171","PercFoodSt = 0.1389","PercOld65 = 0.1781","PercAsian = 0.152","PercRep = 0.423"],"tickvals":[1,2,3,4.0000000000000009,5,6,7],"categoryorder":"array","categoryarray":["PercBlack = 0.0674","PercHisp = 0.414","PercYoung25 = 0.09171","PercFoodSt = 0.1389","PercOld65 = 0.1781","PercAsian = 0.152","PercRep = 0.423"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(55,30,163,1)","family":"","size":13.283520132835198},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":"","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1},{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":15.940224159402243,"yanchor":1,"ysizemode":"pixel"}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716894984}},"hovermode":"closest","width":470,"height":230,"barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"5f90244512c3":{"x":{},"y":{},"fill":{},"type":"bar"},"5f9073a679a":{"x":{},"y":{}}},"cur_data":"5f90244512c3","visdat":{"5f90244512c3":["function (y) ","x"],"5f9073a679a":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Pred. Vac. Rate (all U.S. counties): 0.62</code></pre>
</div>
</div>
</div></div>
</section>
<section id="shap-values-by-variable" class="slide level2 srollable">
<h2>Shap Values by Variable</h2>


<img data-src="Images/AllShapOverview.jpg" class="quarto-figure quarto-figure-center r-stretch"></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="https://ai.lange-analytics.com" target="_blank">https://ai.lange-analytics.com/</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Interpret_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Interpret_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Interpret_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Interpret_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>